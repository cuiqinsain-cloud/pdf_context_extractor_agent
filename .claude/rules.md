# 项目开发规则

## 📋 文档管理规则

### ❌ 严格禁止的行为

1. **禁止创建新的 Markdown 文档**
   - ❌ 不要创建 summary.md、fix.md、guide.md 等任何新文档
   - ❌ 不要为每个功能、修复、问题创建独立文档
   - ❌ 不要创建临时文档、草稿文档
   - ❌ 不要创建"详解"、"总结"、"说明"类文档

2. **禁止文档碎片化**
   - ❌ 不要把一个主题拆分成多个文档
   - ❌ 不要创建重复内容的文档
   - ❌ 不要创建"补充说明"文档

### ✅ 必须遵守的行为

1. **只更新现有文档**
   - ✅ 所有开发进展 → 更新 `docs/DEVELOPMENT.md`
   - ✅ 功能说明 → 更新 `docs/FEATURES.md`
   - ✅ 技术架构 → 更新 `docs/ARCHITECTURE.md`
   - ✅ 环境配置 → 更新 `docs/SETUP.md`
   - ✅ 项目概述 → 更新 `README.md`

2. **文档更新原则**
   - ✅ 在现有章节中添加内容
   - ✅ 保持文档结构清晰
   - ✅ 使用版本号标记更新
   - ✅ 删除过时内容

### 📚 固定文档结构（不可增加）

```
项目根目录/
├── README.md                    # 项目入口和快速开始
├── .claude/
│   └── rules.md                # 本规则文件
└── docs/
    ├── SETUP.md                # 环境配置指南
    ├── FEATURES.md             # 功能说明和使用方法
    ├── DEVELOPMENT.md          # 开发进展、版本历史、已知问题
    ├── ARCHITECTURE.md         # 技术架构和设计文档
    └── archive/                # 历史文档归档（只读）
```

**说明**：
- 这5个文档是项目的全部文档
- 任何新内容都必须整合到这5个文档中
- 不允许创建第6个文档

## 💻 代码管理规则

### ✅ 代码文件创建规则

1. **允许创建的代码文件**
   - ✅ 核心功能模块（如 `src/parsers/income_statement.py`）
   - ✅ 测试文件（如 `tests/test_income_statement.py`）
   - ✅ 工具脚本（如 `tools/export_income_statement.py`）

2. **创建前必须确认**
   - 是否可以扩展现有文件？
   - 是否真的需要新文件？
   - 文件名是否符合项目规范？

### ❌ 禁止创建的文件

- ❌ 临时测试文件（test_temp.py、debug.py）
- ❌ 备份文件（xxx_backup.py、xxx_old.py）
- ❌ 示例文件（example.py、demo.py）

## 📝 提交规则

### Git 提交规范

1. **提交前检查**
   - 是否创建了不必要的文档？
   - 是否可以删除临时文件？
   - 是否可以整合到现有文档？

2. **提交信息格式**
   ```
   <type>: <subject>

   ## 变更说明
   - 具体变更内容

   ## 影响范围
   - 影响的模块

   Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
   ```

3. **Type 类型**
   - `feat`: 新功能
   - `fix`: 修复bug
   - `refactor`: 重构
   - `docs`: 文档更新
   - `test`: 测试相关
   - `chore`: 构建/工具相关

## 🎯 开发流程

### 标准开发流程

1. **需求分析**
   - 理解用户需求
   - 确认是否需要新文件

2. **实现功能**
   - 编写代码（必要时创建新的 .py 文件）
   - 编写测试
   - 运行测试确保通过

3. **更新文档**（关键步骤）
   - ⚠️ **只更新现有文档，不创建新文档**
   - 在 `docs/DEVELOPMENT.md` 中添加版本说明
   - 在 `docs/FEATURES.md` 中更新功能说明（如需要）
   - 更新 `README.md` 的版本号

4. **提交代码**
   - 检查是否有不必要的文档
   - 编写清晰的提交信息
   - 推送到远程仓库

### ⚠️ 特别提醒

**每次完成功能后，问自己：**
1. 我是否创建了新的 .md 文档？（如果是，删除它）
2. 这些内容是否可以整合到现有文档？（答案总是：是）
3. 我是否更新了 DEVELOPMENT.md？（必须更新）

## 📊 文档内容分配

### docs/DEVELOPMENT.md
- ✅ 版本历史（v1.0.0, v1.1.0, v1.1.2...）
- ✅ 已完成功能列表
- ✅ 已知问题和修复记录
- ✅ 开发路线图
- ✅ 性能指标
- ✅ 最近更新

### docs/FEATURES.md
- ✅ 功能列表和说明
- ✅ 使用示例
- ✅ API 文档
- ✅ 配置说明

### docs/ARCHITECTURE.md
- ✅ 系统架构
- ✅ 核心组件说明
- ✅ 技术选型
- ✅ 设计模式

### docs/SETUP.md
- ✅ 环境要求
- ✅ 安装步骤
- ✅ 配置说明
- ✅ 常见问题

### README.md
- ✅ 项目简介
- ✅ 快速开始
- ✅ 核心特性
- ✅ 文档导航

## 🚫 反面案例（禁止）

### ❌ 错误做法示例

```
# 完成利润表功能后，创建了3个文档：
docs/income_statement_summary.md        # ❌ 错误！
docs/income_statement_fix_summary.md    # ❌ 错误！
docs/income_statement_header_fix.md     # ❌ 错误！
```

**问题**：
- 文档碎片化
- 维护成本高
- 信息重复
- 查找困难

### ✅ 正确做法示例

```
# 完成利润表功能后，只更新现有文档：
docs/DEVELOPMENT.md  # ✅ 在 v1.1.2 章节添加利润表内容
README.md           # ✅ 更新版本号和功能列表
```

**优势**：
- 文档集中
- 易于维护
- 信息统一
- 查找方便

## 📌 总结

### 核心原则

1. **文档数量固定**：只有5个文档，不能增加
2. **只更新不创建**：所有内容整合到现有文档
3. **代码文件必要性**：创建前三思，能扩展就不新建
4. **提交前检查**：确保没有不必要的文档

### 记住这句话

> **"如果你想创建新文档，那一定是错的。应该更新现有文档。"**

---

**最后更新**: 2026-02-05
**适用版本**: v1.1.2+
