# PDFè´¢åŠ¡æŠ¥è¡¨æ•°æ®æå–å·¥å…·

ä»Aè‚¡è´¢åŠ¡æŠ¥è¡¨PDFä¸­æå–ç»“æ„åŒ–æ•°æ®çš„ä¸“ä¸šå·¥å…·

## é¡¹ç›®ç®€ä»‹

ä»Aè‚¡è´¢åŠ¡æŠ¥è¡¨PDFä¸­æå–ç»“æ„åŒ–æ•°æ®ï¼Œæ”¯æŒä»¥ä¸‹æŠ¥è¡¨ç±»å‹ï¼š
- âœ… åˆå¹¶èµ„äº§è´Ÿå€ºè¡¨ï¼ˆå·²å®ç°ï¼‰
- ğŸš§ åˆå¹¶åˆ©æ¶¦è¡¨ï¼ˆè®¡åˆ’ä¸­ï¼‰
- ğŸš§ åˆå¹¶ç°é‡‘æµé‡è¡¨ï¼ˆè®¡åˆ’ä¸­ï¼‰
- ğŸš§ åˆå¹¶è´¢åŠ¡æŠ¥è¡¨é¡¹ç›®é™„æ³¨ï¼ˆè®¡åˆ’ä¸­ï¼‰

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š **æ™ºèƒ½è¾¹ç•Œè¯†åˆ«**ï¼šè‡ªåŠ¨è¯†åˆ«æŠ¥è¡¨èµ·æ­¢ä½ç½®ï¼Œæ”¯æŒæ··åˆé¡µé¢å†…å®¹åˆ†ç¦»
- ğŸ¯ **ç²¾ç¡®æå–**ï¼šåŸºäºé¡µç èŒƒå›´çš„ç²¾å‡†å®šä½ï¼Œæ”¯æŒè·¨é¡µè¡¨æ ¼åˆå¹¶
- ğŸ”§ **æ¨¡å—åŒ–è®¾è®¡**ï¼šè§£è€¦çš„æ¶æ„ä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- ğŸ“‹ **å¤šç§è¾“å‡º**ï¼šæ”¯æŒJSONã€Excelã€CSVæ ¼å¼
- âœ… **æ•°æ®éªŒè¯**ï¼šå†…ç½®å®Œæ•´æ€§å’Œå‡†ç¡®æ€§æ£€æŸ¥ï¼ˆèµ„äº§è´Ÿå€ºå¹³è¡¡éªŒè¯ï¼‰
- ğŸ” **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•

## ç¯å¢ƒè¦æ±‚

- Python 3.8+
- è™šæ‹Ÿç¯å¢ƒå·²åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
source venv/bin/activate  # macOS/Linux
pip install -r requirements.txt
```

## é¡¹ç›®ç»“æ„

```
pdf_context_extractor_agent/
â”œâ”€â”€ README.md                 # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ Agents.md                 # Agentä½¿ç”¨æŒ‡å—
â”œâ”€â”€ requirements.txt          # Pythonä¾èµ–
â”œâ”€â”€ venv/                     # è™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ src/                      # æºä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ pdf_reader.py         # PDFè¯»å–æ¨¡å—
â”‚   â”œâ”€â”€ table_extractor.py    # è¡¨æ ¼æå–æ¨¡å—ï¼ˆæ”¯æŒæ··åˆé¡µé¢åˆ†ç¦»ï¼‰
â”‚   â””â”€â”€ parsers/              # è§£æå™¨æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ balance_sheet.py  # èµ„äº§è´Ÿå€ºè¡¨è§£æå™¨ï¼ˆå·²å®Œæˆï¼‰
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ sample_pdfs/          # æµ‹è¯•PDFæ–‡ä»¶å­˜æ”¾ä½ç½®
â”œâ”€â”€ output/                   # è¾“å‡ºç»“æœç›®å½•
â””â”€â”€ main.py                   # ä¸»ç¨‹åºå…¥å£
```

### ä½¿ç”¨ç¤ºä¾‹

#### Python API
```python
from main import FinancialReportExtractor

# åˆ›å»ºæå–å™¨å®ä¾‹
extractor = FinancialReportExtractor('tests/sample_pdfs/sample.pdf')

# æå–åˆå¹¶èµ„äº§è´Ÿå€ºè¡¨ï¼ˆ126-128é¡µï¼‰
result = extractor.extract_balance_sheet((126, 128))

# æ£€æŸ¥æå–ç»“æœ
if result['success']:
    print("æå–æˆåŠŸï¼")
    summary = extractor.get_extraction_summary(result)
    print(summary)

    # ä¿å­˜ç»“æœ
    extractor.save_result(result, 'output/balance_sheet.json', 'json')
    extractor.save_result(result, 'output/balance_sheet.xlsx', 'excel')
else:
    print(f"æå–å¤±è´¥ï¼š{result['error_message']}")
```

#### å‘½ä»¤è¡Œä½¿ç”¨
```bash
# åŸºæœ¬ç”¨æ³•
python main.py tests/sample_pdfs/sample.pdf --pages 126-128

# æŒ‡å®šè¾“å‡ºæ ¼å¼å’Œè·¯å¾„
python main.py tests/sample_pdfs/sample.pdf --pages 126-128 --output result.xlsx --format excel

# è¯¦ç»†è¾“å‡ºï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰
python main.py tests/sample_pdfs/sample.pdf --pages 126-128 --verbose
```

## è¾“å‡ºæ•°æ®ç»“æ„

### JSONæ ¼å¼ç¤ºä¾‹
```json
{
  "extraction_info": {
    "pdf_path": "tests/sample_pdfs/sample.pdf",
    "page_range": [126, 128],
    "extraction_time": "2026-02-04T10:00:00",
    "version": "1.0.0"
  },
  "balance_sheet_data": {
    "report_type": "åˆå¹¶èµ„äº§è´Ÿå€ºè¡¨",
    "assets": {
      "current_assets": {
        "è´§å¸èµ„é‡‘": {
          "original_name": "è´§å¸èµ„é‡‘",
          "current_period": "1000000.00",
          "previous_period": "900000.00",
          "note": "å…­ã€1"
        },
        "åº”æ”¶è´¦æ¬¾": {
          "original_name": "åº”æ”¶è´¦æ¬¾",
          "current_period": "500000.00",
          "previous_period": "450000.00",
          "note": "å…­ã€2"
        }
      },
      "non_current_assets": {
        "å›ºå®šèµ„äº§": {
          "original_name": "å›ºå®šèµ„äº§",
          "current_period": "2000000.00",
          "previous_period": "1900000.00",
          "note": "å…­ã€4"
        }
      },
      "assets_total": {
        "original_name": "èµ„äº§æ€»è®¡",
        "current_period": "3900000.00",
        "previous_period": "3625000.00"
      }
    },
    "liabilities": {
      "current_liabilities": {...},
      "non_current_liabilities": {...},
      "liabilities_total": {...}
    },
    "equity": {...},
    "liabilities_and_equity_total": {...}
  },
  "validation_result": {
    "is_valid": true,
    "balance_check": {
      "status": "passed",
      "difference": 0.0
    },
    "completeness_score": 0.95,
    "errors": [],
    "warnings": []
  },
  "success": true
}
```

## æ¶æ„è®¾è®¡

### æŠ€æœ¯æ ˆ
- **PDFå¤„ç†**ï¼špdfplumber 0.11.9ï¼ˆè¡¨æ ¼æå–èƒ½åŠ›å¼ºï¼‰
- **æ•°æ®å¤„ç†**ï¼špandas 3.0.0
- **è¾“å‡ºæ ¼å¼**ï¼šopenpyxlï¼ˆExcelï¼‰ã€jsonã€csv

### æ¨¡å—åŒ–è®¾è®¡
- **PDFå¤„ç†å±‚** (`pdf_reader.py`)ï¼šè´Ÿè´£PDFè¯»å–å’Œé¡µé¢æå–
- **è¡¨æ ¼æå–å±‚** (`table_extractor.py`)ï¼šè¯†åˆ«å’Œæå–è¡¨æ ¼æ•°æ®ï¼Œæ”¯æŒæ··åˆé¡µé¢å†…å®¹åˆ†ç¦»
- **è§£æå™¨å±‚** (`parsers/balance_sheet.py`)ï¼šé’ˆå¯¹èµ„äº§è´Ÿå€ºè¡¨çš„ä¸“ç”¨è§£æå™¨
- **éªŒè¯å±‚**ï¼šå†…ç½®æ•°æ®å®Œæ•´æ€§å’Œå‡†ç¡®æ€§éªŒè¯ï¼ˆèµ„äº§è´Ÿå€ºå¹³è¡¡æ£€æŸ¥ï¼‰
- **è¾“å‡ºå±‚**ï¼šå¤šæ ¼å¼æ•°æ®å¯¼å‡ºï¼ˆJSON/CSV/Excelï¼‰

### æ•°æ®å¤„ç†æµç¨‹
```
PDFè¾“å…¥ + é¡µç  â†’ PDFè¯»å– â†’ è¡¨æ ¼æå– â†’ è¾¹ç•Œè¯†åˆ« â†’ æ•°æ®è§£æ â†’ ç»“æ„éªŒè¯ â†’ æ ¼å¼åŒ–è¾“å‡º
```

### å…³é”®æŠ€æœ¯å®ç°
1. **æ™ºèƒ½è¾¹ç•Œè¯†åˆ«**ï¼šåŸºäº"è´Ÿå€ºå’Œæ‰€æœ‰è€…æƒç›Šæ€»è®¡"ç­‰å…³é”®è¯ç²¾ç¡®å®šä½
2. **æ··åˆé¡µé¢åˆ†ç¦»**ï¼šè‡ªåŠ¨åŒºåˆ†èµ„äº§è´Ÿå€ºè¡¨å’Œå…¶ä»–æŠ¥è¡¨å†…å®¹
3. **è·¨é¡µè¡¨æ ¼åˆå¹¶**ï¼šæ”¯æŒèµ„äº§è´Ÿå€ºè¡¨è·¨å¤šé¡µçš„è‡ªåŠ¨åˆå¹¶
4. **æ•°æ®éªŒè¯**ï¼šèµ„äº§æ€»è®¡ = è´Ÿå€º+æƒç›Šæ€»è®¡çš„å¹³è¡¡æ€§æ£€æŸ¥

## ç‰ˆæœ¬ä¿¡æ¯

- **å½“å‰ç‰ˆæœ¬**: v1.0.0
- **æ›´æ–°æ—¶é—´**: 2026-02-04
- **å·²æ”¯æŒæŠ¥è¡¨**: åˆå¹¶èµ„äº§è´Ÿå€ºè¡¨
- **Pythonç‰ˆæœ¬**: 3.14.0
- **ä¸»è¦ä¾èµ–**: pdfplumber 0.11.9, pandas 3.0.0, openpyxl 3.1.5

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-02-04)
- âœ… **å®Œæˆåˆå¹¶èµ„äº§è´Ÿå€ºè¡¨æå–åŠŸèƒ½**
  - å®ç°æ™ºèƒ½è¾¹ç•Œè¯†åˆ«ï¼ˆåŸºäºç»“æŸæ ‡å¿—æ£€æµ‹ï¼‰
  - æ”¯æŒæ··åˆé¡µé¢å†…å®¹åˆ†ç¦»ï¼ˆç¬¬128é¡µå¤„ç†ï¼‰
  - æ”¯æŒè·¨é¡µè¡¨æ ¼è‡ªåŠ¨åˆå¹¶ï¼ˆ126-128é¡µï¼‰
  - å®ç°èµ„äº§è´Ÿå€ºå¹³è¡¡æ€§éªŒè¯
  - æ”¯æŒJSON/Excel/CSVå¤šæ ¼å¼è¾“å‡º
- âœ… **å»ºç«‹å®Œæ•´çš„é¡¹ç›®æ¶æ„**
  - PDFè¯»å–æ¨¡å— (`pdf_reader.py`)
  - è¡¨æ ¼æå–æ¨¡å— (`table_extractor.py`)
  - èµ„äº§è´Ÿå€ºè¡¨è§£æå™¨ (`parsers/balance_sheet.py`)
  - ä¸»ç¨‹åºå…¥å£ (`main.py`)
- âœ… **æä¾›å‘½ä»¤è¡Œå’ŒPython APIä¸¤ç§ä½¿ç”¨æ–¹å¼**
- âœ… **å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•**

### v0.1.0-dev (2026-02-03)
- åˆå§‹åŒ–é¡¹ç›®ç»“æ„
- åˆ›å»ºæ ¸å¿ƒæ¨¡å—æ¡†æ¶
- è®¾è®¡æ¨¡å—åŒ–æ¶æ„

## ä¸‹ä¸€æ­¥è®¡åˆ’

1. ğŸš§ å®ç°åˆå¹¶åˆ©æ¶¦è¡¨æå–åŠŸèƒ½
2. ğŸš§ å®ç°åˆå¹¶ç°é‡‘æµé‡è¡¨æå–åŠŸèƒ½
3. ğŸš§ å®ç°è´¢åŠ¡æŠ¥è¡¨é™„æ³¨æå–åŠŸèƒ½ï¼ˆæ–‡æœ¬+è¡¨æ ¼ï¼‰
4. ğŸ”§ ä¼˜åŒ–è¡¨æ ¼è¯†åˆ«å‡†ç¡®ç‡
5. ğŸ“Š å¢åŠ æ›´å¤šæ•°æ®éªŒè¯è§„åˆ™
